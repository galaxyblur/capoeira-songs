<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Capoeira Songs</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.0.6/wordcloud2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.17.1/axios.min.js"></script>
    <style>
      #capoeira-songs-word-cloud,
      #capoeira-songs-ngrams-cloud {
        width: 1000px;
        height: 600px;
        margin: auto;
        padding: 25px;
      }
    </style>
  </head>
  <body>
    <h1>Capoeira Song Analysis (<span id="song-count">0</span>)</h1>
    <section>
      <h2>Frequency of Words</h2>
      <p>
        Displaying <span id="word-count-displayed">0</span> of <span id="word-count-total">0</span> words
        that appear in &gt;= <span id="word-count-threshold">0</span> songs.
      </p>
      <div id="capoeira-songs-word-cloud"></div>
    </section>
    <section>
      <h2>Frequency of ngrams</h2>
      <div id="capoeira-songs-ngrams-cloud"></div>
    </section>
    <script>
      axios.get('/json/songs.json').then((result) => {
        if (result && result.data) {
          document.querySelector('#song-count').innerText = result.data.length;
        }
      });

      axios.get('/json/nlp-tokens.json').then((result) => {
        const threshold = 20;

        if (result && result.data) {
          var list = result.data.filter(w => w[1] > threshold);
          document.querySelector('#word-count-total').innerText = result.data.length;
          document.querySelector('#word-count-displayed').innerText = list.length;
          document.querySelector('#word-count-threshold').innerText = threshold;
          WordCloud(document.getElementById('capoeira-songs-word-cloud'), {
            list: list,
            weightFactor: threshold / 80,
          });
        }
      });
      /*
      axios.get('/json/nlp-ngrams.json').then((result) => {
        if (result && result.data) {
          var list = result.data.filter(w => w[1] > 5);
          WordCloud(document.getElementById('capoeira-songs-ngrams-cloud'), { list: list } );
        }
      });
      */
    </script>
  </body>
</html>
